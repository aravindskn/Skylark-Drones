!function(a){function d(a){var b=a.changedTouches,c=b[0],d="";switch(a.type){case"touchstart":d="mousedown";break;case"touchmove":d="mousemove";break;case"touchend":d="mouseup";break;default:return}var e=document.createEvent("MouseEvent"),f=2;navigator.userAgent.match(/Android/i)&&(f=10),e.initMouseEvent(d,!0,!0,window,1,c.screenX,c.screenY,c.clientX*f,c.clientY*f,!1,!1,!1,!1,0,null),c.target.dispatchEvent(e)}var b={repeat:!1,direction:"horizontal",animationTime:700,easing:"ease-out",overlay:!0};a.fn.panorama_viewer=function(c){return document.addEventListener("touchstart",d,!0),document.addEventListener("touchmove",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("touchcancel",d,!0),this.each(function(){var d=a.extend({},b,c),e=a(this);e.find("> img").load(function(){function k(b){var c={x:!1,y:!1},e={x:i.x-(h.x-b.clientX),y:i.y-(h.y-b.clientY)};return"horizontal"==d.direction?(c.x=1==d.repeat?!0:e.x<0&&-1*e.x<g.w,j&&c.x&&(i.x=e.x,i.y=0)):(c.y=1==d.repeat?!0:e.y<0&&-1*e.y<g.h,j&&c.y&&(i.y=e.y,i.x=0)),a(this).css("background-position",i.x+"px "+i.y+"px"),h.x=b.clientX,h.y=b.clientY,b.stopPropagation(),!1}function l(b){return j=!1,c.unbind("mousemove",k),"mousedown"==b.type?(h.x=b.clientX,h.y=b.clientY,j=!0,c.bind("mousemove",k)):a(document.body).focus(),b.stopPropagation(),!1}function m(){i={x:0,y:0},a(this).css("backgroundPosition","0 0")}e.find("> img").addClass("pv-pano"),e.addClass("pv-container").wrapInner("<div class='pv-inner pv-animating'></div>"),"vertical"==d.direction&&e.addClass("pv-vertical"),e.find(".pv-animating").css({"-webkit-transition":"all "+d.animationTime+"ms "+d.easing,"-moz-transition":"all "+d.animationTime+"ms "+d.easing,"-ms-transition":"all "+d.animationTime+"ms "+d.easing,transition:"all "+d.animationTime+"ms "+d.easing}),imgSrc=e.find(".pv-pano").attr("src"),width=e.find(".pv-pano").width(),height=e.find(".pv-pano").height();var b="no-repeat";1==d.repeat&&(b="repeat"),e.find(".pv-inner").css({height:height,width:width,background:"url("+imgSrc+") "+b,"background-size":"cover"}),1==d.overlay&&(a("<div class='pv-overlay'><i class='pvicon-overlay'></i></div>").appendTo(e.find(".pv-inner")),e.find(".pv-inner").bind("mouseenter",function(){a(this).find(".pv-overlay ").fadeOut("fast")}).bind("mouseleave",function(){a(this).find(".pv-overlay ").fadeIn("fast")}));var c=e.find(".pv-inner"),f={w:parseInt(c.parent().width()),h:parseInt(c.parent().height())},g={w:width-f.w,h:height-f.h},h={x:0,y:0},i={x:0,y:0},j=!1;c.bind("mousedown mouseup mouseleave",l),c.bind("dblclick",m),e.find(".pv-pano").hide()})})}}(window.jQuery);